/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   main.c                                             :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: tedcarpi <tedcarpi@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/02/23 14:25:05 by tedcarpi          #+#    #+#             */
/*   Updated: 2025/02/24 18:20:20 by tedcarpi         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "mlx.h"
#include "../solong.h"

int close_window()
{
    printf("Thanks for playing !\n");
    exit(0);
    return (0);
}
int key(int keycode)
{
    if (keycode == 65307)
        close_window();
    return (0);
}
int main()
{
    t_game game;
    int     x;
    int     y;

    printf("üîß Initialisation de MLX...\n");
    game.mlx = mlx_init();
    if (!game.mlx)
    {
        printf("‚ùå Erreur: mlx_init() a √©chou√© !\n");
        return (1);
    }
    printf("‚úÖ MLX initialis√© avec succ√®s !\n");

    printf("üîß Cr√©ation de la fen√™tre...\n");
    mlx_get_screen_size(game.mlx, &x, &y);
    game.win = mlx_new_window(game.mlx, x, y, "so_long");
    if (!game.win)
    {
        printf("‚ùå Erreur: mlx_new_window() a √©chou√© !\n");
        return (1);
    }
    printf("‚úÖ Fen√™tre cr√©√©e avec succ√®s !\n");

    mlx_key_hook(game.win, key, NULL);

    mlx_hook(game.win, 17, 0, close_window, NULL);

    game.wall = mlx_xpm_file_to_image(game.mlx, "img/wall.xpm", &game.img_wth, &game.img_hgt);
    game.floor = mlx_xpm_file_to_image(game.mlx, "img/floor.xpm", &game.img_wth, &game.img_hgt);

    // char *map[] = {
    //     "111111111111111111111111111111111111111111111111111",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "100000000000000000000000000000000000000000000000001",
    //     "111111111111111111111111111111111111111111111111111",
    //     NULL
    // };
    //render_map(&game, map);

    //printf("üîÑ Lancement de mlx_loop()...\n");
    mlx_loop(game.mlx);
    
    return (0);
}
